---
name: 精简代码注释清理
overview: 对前端（api、config、lmComponents、lmHooks、mock、store/modules、views/training、views/template）和中间件全部源代码文件进行注释精简/删除，移除冗余注释、注释掉的代码、调试注释等，保留关键业务逻辑说明注释，不影响现有功能。
todos:
  - id: config
    content: 精简 src/config 目录注释（7 文件）— 删除注释掉的代码和调试注释
    status: completed
  - id: lmComponents
    content: 精简 src/lmComponents 目录注释（7 文件）— 删除冗余 HTML/JS 注释
    status: completed
  - id: lmHooks
    content: 精简 src/lmHooks 目录注释（3 文件）— 删除冗余注释
    status: completed
  - id: store
    content: 精简 src/store/modules 5个文件注释 — 删除冗余注释、TODO、注释代码
    status: completed
  - id: mock
    content: 精简 src/mock 目录注释（3 文件）— 删除分隔符、冗余注释、注释代码
    status: completed
  - id: api
    content: 精简 src/api 目录注释（~149 文件）— 删除 TODO、注释代码、调试注释
    status: completed
  - id: views-training
    content: 精简 src/views/training 目录注释（60 文件）— 删除 HTML 结构注释、冗余功能注释、注释代码块
    status: completed
  - id: views-template
    content: 精简 src/views/template 目录注释（31 文件）— 删除 HTML 结构注释、冗余 JSDoc、冗余功能注释
    status: completed
  - id: middleware
    content: 精简 collaborative-middleware/src/ 注释（7 文件）— 删除冗余变量说明和自解释注释
    status: completed
isProject: false
---

# 精简/删除代码注释计划

## 分析概览

经过全面扫描，涉及 **约 260+ 个文件**，预计需要删除/精简 **约 1,400+ 行注释**，保留 **约 2,500+ 行** 有价值的注释。

## 删除规则

以下类型的注释将被删除：

1. **冗余/显而易见的注释** — 代码本身已清晰表达意图

- `// Props`、`// Emits`、`// 查询`、`// 保存`、`// 删除` 等
- `// 加载状态`、`// 列表数据`、`// 表格引用和选中数据` 等
- `<!-- 工具栏 -->`、`<!-- 搜索栏 -->`、`<!-- 分页 -->` 等 HTML 结构注释

1. **注释掉的代码** — 已不再使用的旧代码

- `// return import.meta.env.VITE_JAVA_API_URL || 'http://192.168.20.199:8081'`
- `// const selectedCategory = ref('0')`
- `// exerciseTheme: '...'`
- `<!-- <el-option ... /> -->` 等

1. **调试注释** — 开发阶段的调试信息

- `// for debug`、`console.log` 后的调试说明

1. **TODO/历史注释** — 已过时的 TODO 和迁移记录

- `// TODO @dhb52：vo 缺少`、`// TODO @芋艿：调整到 constants`
- `// 【已删除】T-User 响应头提取逻辑`
- `// preschooler：vue-router@4以后已支持静态404路由`

1. **装饰性分隔符** — 视觉分隔线注释

- `// ==================== Mock 数据 ====================`
- `// ==================== BubbleMenu 相关 ====================`

1. **冗余 JSDoc** — 函数名/属性名已清晰表达、无额外信息的 JSDoc

- 如 `/** 存入文档的 ArrayBuffer */` 对应 `setBuffer()` 方法

## 保留规则

以下类型的注释将保留：

1. **业务逻辑说明** — 解释"为什么这样做"的注释
2. **协议/算法说明** — Y.js 协议步骤、单位转换公式等
3. **兼容性说明** — Java/Node 后端兼容、旧数据格式兼容等
4. **设计决策** — Google Docs 模式、解析策略 fallback 等
5. **Bug 修复说明** — 关键修复的上下文说明
6. **架构/模块说明** — 文件/类级别的职责描述（如 `app.module.ts` 的迁移记录）
7. **自定义语法说明** — AI 模块标记语法 `:::ai`、红头文件标记等

## 各模块工作量估算

| 模块                 | 文件数 | 预计删除行数 | 复杂度                         |
| -------------------- | ------ | ------------ | ------------------------------ |
| `src/api`            | ~149   | ~200         | 低（主要删除 TODO 和注释代码） |
| `src/config`         | 7      | ~15          | 低                             |
| `src/lmComponents`   | 7      | ~28          | 低                             |
| `src/lmHooks`        | 3      | ~50          | 中                             |
| `src/store/modules`  | 5      | ~80          | 中                             |
| `src/mock`           | 3      | ~160         | 中                             |
| `src/views/training` | 60     | ~420         | 高（文件多且大）               |
| `src/views/template` | 31     | ~350         | 高（文件多且大）               |
| 中间件 `src/`        | 7      | ~100         | 中                             |

## 执行顺序

按从简单到复杂的顺序，逐模块处理：

### 第一批：低复杂度模块

- `src/config`（7 文件）— 删除注释掉的代码和调试注释
- `src/lmComponents`（7 文件）— 删除冗余 HTML/JS 注释
- `src/lmHooks`（3 文件）— 删除冗余注释，保留 JSDoc 和业务逻辑

### 第二批：Store 和 Mock

- `src/store/modules`（5 文件）— 删除冗余注释、TODO、注释代码
- `src/mock`（3 文件）— 删除分隔符、冗余注释、注释掉的代码

### 第三批：API 目录

- `src/api`（~149 文件）— 删除 TODO、注释代码、调试注释

### 第四批：Views 目录（最大工作量）

- `src/views/training`（60 文件）— 删除 HTML 结构注释、冗余功能注释、注释代码块
- `src/views/template`（31 文件）— 删除 HTML 结构注释、冗余 JSDoc、冗余功能注释

### 第五批：中间件

- `collaborative-middleware/src/`（7 文件）— 删除冗余变量说明、代码自解释的注释，保留协议和设计说明

## 注意事项

- 每个模块处理完后需确认功能不受影响（注释删除不改变逻辑）
- `@ts-nocheck`、`@ts-ignore`、`eslint-disable` 等工具指令注释 **不删除**
- `.gitignore`、`Dockerfile` 中的注释 **不删除**
- 类型定义文件中有意义的字段说明注释 **保留**
